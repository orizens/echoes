define(["underscore","backbone","./user_profile_manager","./youtube_media_provider","./youtube_profile_service","./youtube_player","./youtube/ProfileService","models/updates-service"],function(e,t,i,u,n,s,o,r){var l=t.Model.extend({defaults:{layout:"videos",filter:"videos",route:null,user:null,youtube:null,player:null,"mark-as-favorite":!1},safe:"EchoesPlayerApp",youtube:new u,user:new n,updates:null,initialize:function(){this.clean(),this.set("youtube",this.youtube),this.set("user",this.user),this.set("player",new s),this.updates=new r,this.set("route",null),this.set("playlist-add",!1),this.youtube.set({feedType:this.get("filter")},{silent:!0})},clean:function(){localStorage.removeItem("EchoesPlayerApp-v20130202")},start:function(){},onFilterChange:function(e,t){this.set({layout:t})},connectUser:function(){this.user.fetch()},connect:function(e){this.user.setToken(e)},getSignin:function(){return this.user.urls.signin},getSignout:function(){return this.user.urls.signout},route:function(e){this.set({layout:e})},playMedia:function(e){this.get("player").setOptions(e)},fetchCurrentMediaInfo:function(){this.youtube.fetchMediaById(this.get("player").get("mediaId"))},fetchPlaylistInfo:function(){this.youtube.fetchPlaylistInfo(this.get("player").get("nowPlayingId"))}});return l});