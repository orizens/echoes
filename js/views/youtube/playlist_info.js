define(["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({initialize:function(){this.listenTo(this.model.youtube().get("playlist"),"change:items",this.render),this.listenTo(this.model,"change:currentIndex",this.updateIndex)},render:function(e,n){this.playlistId=e.get("id");var r=this.model.get("mediaOptions");this.currentIndex=r?parseInt(r.index,10):0;var i=t.map(n,this.makeListItem,this);this.$el.html(i.join(""))},makeListItem:function(e,t){var n='<li class="'+(t===this.currentIndex?"active":"")+" track-"+t+'"><a class="ellipsis" href="#play/playlist/'+this.playlistId+"/"+t+'">'+(t+1)+". "+e.video.title+"</a></li>";return n},updateIndex:function(e,t){this.$el.find(".active").removeClass("active").end().find(".track-"+t).addClass("active")}});return r});